<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UnbelievaAuto | California v10</title>
    <style>
        :root {
            --blue: #007AFF;
            --bg: #F5F5F7;
            --card: rgba(255, 255, 255, 0.9);
            --text: #1d1d1f;
            --muted: #86868b;
        }

        * { box-sizing: border-box; -webkit-font-smoothing: antialiased; transition: all 0.2s ease-out; }

        body, html {
            margin: 0; padding: 0; height: 100%; width: 100%;
            background: var(--bg);
            font-family: -apple-system, "SF Pro Display", sans-serif;
            color: var(--text);
            overflow: hidden;
        }

        /* --- INTRO ANIMATION --- */
        .intro {
            position: fixed; inset: 0; background: #fff; z-index: 999;
            display: flex; justify-content: center; align-items: center;
            animation: fadeOut 0.8s forwards 2.5s;
        }

        .intro span {
            display: inline-block; font-size: 42px; font-weight: 600;
            opacity: 0; filter: blur(12px); transform: translateY(30px);
            animation: appleEntry 0.6s forwards;
        }

        @keyframes appleEntry { to { opacity: 1; filter: blur(0); transform: translateY(0); } }
        @keyframes fadeOut { to { opacity: 0; visibility: hidden; } }

        /* --- MAIN UI --- */
        .app-shell {
            display: grid;
            grid-template-columns: 300px 1fr;
            height: 100vh;
            width: 100vw;
        }

        nav {
            background: rgba(240, 240, 243, 0.6);
            backdrop-filter: blur(30px);
            padding: 40px 24px;
            border-right: 1px solid rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .brand { font-size: 22px; font-weight: 700; letter-spacing: -0.8px; margin-bottom: 10px; }

        .field-group { display: flex; flex-direction: column; gap: 15px; }
        .field { display: flex; flex-direction: column; gap: 5px; }
        label { font-size: 10px; font-weight: 700; color: var(--muted); text-transform: uppercase; letter-spacing: 0.5px; }
        
        input {
            background: #fff; border: 1px solid #d2d2d7; border-radius: 10px;
            padding: 12px; font-size: 14px; outline: none;
        }
        input:focus { border-color: var(--blue); box-shadow: 0 0 0 3px rgba(0,122,255,0.1); }

        main { padding: 60px; display: flex; flex-direction: column; gap: 40px; }
        h2 { font-size: 34px; font-weight: 700; margin: 0; letter-spacing: -1.2px; }

        .stats { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; }
        .stat-card {
            background: var(--card); backdrop-filter: blur(20px);
            border-radius: 24px; padding: 35px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.04);
            border: 1px solid rgba(255,255,255,0.8);
        }

        .stat-card h3 { margin: 0; font-size: 12px; font-weight: 700; color: var(--muted); text-transform: uppercase; }
        .stat-card .val { font-size: 54px; font-weight: 800; margin-top: 10px; letter-spacing: -2px; color: var(--text); }

        .btn {
            width: 100%; padding: 16px; border-radius: 14px; font-weight: 600; 
            font-size: 16px; border: none; cursor: pointer; margin-top: 10px;
        }
        .btn-blue { background: var(--blue); color: #fff; }
        .btn-blue:hover { opacity: 0.9; transform: translateY(-1px); }
        .btn-stop { background: #E8E8ED; color: #FF3B30; display: none; }

        .log-box {
            background: #fff; padding: 20px; border-radius: 18px;
            font-size: 13px; color: var(--muted); display: flex; align-items: center; gap: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.02);
        }
        .dot { width: 8px; height: 8px; border-radius: 50%; background: #d2d2d7; }
        .active .dot { background: var(--blue); animation: blink 1s infinite; }
        @keyframes blink { 0% { opacity: 0.4; } 50% { opacity: 1; } 100% { opacity: 0.4; } }
    </style>
</head>
<body>

    <div class="intro" id="intro"></div>

    <div class="app-shell">
        <nav>
            <div class="brand">UnbelievaAuto</div>
            
            <div class="field-group">
                <div class="field">
                    <label>Auth Token</label>
                    <input type="password" id="token" placeholder="Required">
                </div>
                <div class="field">
                    <label>Channel ID</label>
                    <input type="text" id="channelId" value="1417962541702709258">
                </div>
                <div class="field">
                    <label>Guild ID</label>
                    <input type="text" id="guildId" value="1347804635989016617">
                </div>
            </div>

            <div style="margin-top: auto;">
                <button class="btn btn-blue" id="startBtn" onclick="engage()">Initiate Farm</button>
                <button class="btn btn-stop" id="stopBtn" onclick="halt()">Stop Session</button>
            </div>
        </nav>

        <main>
            <h2>California Engine</h2>

            <div class="stats">
                <div class="stat-card">
                    <h3>Work Cooldown</h3>
                    <div id="timer" class="val" style="color: var(--blue);">00.0s</div>
                </div>
                <div class="stat-card">
                    <h3>Total Profit Cycles</h3>
                    <div id="cycles" class="val">0</div>
                </div>
            </div>

            <div class="log-box" id="statusBox">
                <div class="dot"></div>
                <span id="log">System Standby...</span>
            </div>
        </main>
    </div>

    <script>
        // Intro Animation
        const title = "UnbelievaAuto";
        const intro = document.getElementById('intro');
        title.split('').forEach((char, i) => {
            const s = document.createElement('span');
            s.textContent = char;
            s.style.animationDelay = `${i * 0.08}s`;
            intro.appendChild(s);
        });

        let farming = false;
        let count = 0;

        const DEFS = {
            app: "292953664492929025",
            session: "43c7f2a6ccf5a143bfbb9196c456b071",
            work: { id: "901118136529588281", ver: "973314412968562777" },
            collect: { id: "901118136529588278", ver: "973314412968562774" },
            deposit: { id: "901118136529588275", ver: "973314412968562769" }
        };

        async function send(token, g, c, name, data, options = []) {
            try {
                await fetch('https://discord.com/api/v9/interactions', {
                    method: 'POST',
                    headers: { 'Authorization': token, 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        type: 2,
                        application_id: DEFS.app,
                        guild_id: g,
                        channel_id: c,
                        session_id: DEFS.session,
                        data: {
                            version: data.ver,
                            id: data.id,
                            name: name,
                            type: 1,
                            options: options
                        }
                    })
                });
            } catch (err) { console.error(err); }
        }

        function updateLog(msg) { document.getElementById('log').innerText = msg; }

        function halt() {
            farming = false;
            document.getElementById('startBtn').style.display = "block";
            document.getElementById('stopBtn').style.display = "none";
            document.getElementById('statusBox').classList.remove('active');
            updateLog("Session terminated.");
        }

        async function engage() {
            const token = document.getElementById('token').value;
            const g = document.getElementById('guildId').value;
            const c = document.getElementById('channelId').value;
            
            if(!token) return alert("Token Required");

            farming = true;
            document.getElementById('startBtn').style.display = "none";
            document.getElementById('stopBtn').style.display = "block";
            document.getElementById('statusBox').classList.add('active');

            while(farming) {
                // 1. WORK Starts the 26s Cooldown immediately
                let cooldownEnd = Date.now() + 26100;
                updateLog("Firing /work...");
                await send(token, g, c, "work", DEFS.work);

                // 2. WAIT 0.1s
                await new Promise(r => setTimeout(r, 100));

                // 3. COLLECT
                updateLog("Firing /collect-income...");
                await send(token, g, c, "collect-income", DEFS.collect);

                // 4. WAIT 0.1s
                await new Promise(r => setTimeout(r, 100));

                // 5. DEPOSIT (Corrected with 'amount' option)
                updateLog("Firing /deposit all...");
                await send(token, g, c, "deposit", DEFS.deposit, [{
                    type: 3, 
                    name: "amount", 
                    value: "all"
                }]);

                count++;
                document.getElementById('cycles').innerText = count;

                // 6. Monitor the 26s timer
                while(Date.now() < cooldownEnd && farming) {
                    let rem = ((cooldownEnd - Date.now()) / 1000).toFixed(1);
                    document.getElementById('timer').innerText = rem + "s";
                    await new Promise(r => setTimeout(r, 50));
                }
            }
        }
    </script>
</body>
</html>
