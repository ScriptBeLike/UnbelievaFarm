<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UnbelievaAuto v2</title>
    <style>
        :root {
            --bg: #000000;
            --surface: #111111;
            --uber-white: #ffffff;
            --uber-gray: #a6a6a6;
            --border: #333333;
            --accent: #ffffff; /* Monochromatic Uber style */
        }

        * {
            box-sizing: border-box;
            font-family: "Uber Move Text", system-ui, -apple-system, sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        body {
            background-color: var(--bg);
            color: var(--uber-white);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 480px;
            padding: 40px;
        }

        header {
            margin-bottom: 40px;
            border-bottom: 2px solid var(--uber-white);
            padding-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
        }

        h1 {
            font-size: 32px;
            font-weight: 500;
            margin: 0;
            letter-spacing: -1px;
            line-height: 1;
        }

        .version {
            font-size: 14px;
            font-weight: 700;
            color: var(--uber-gray);
            margin-bottom: 2px;
        }

        .panel {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        label {
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--uber-gray);
            margin-left: 2px;
        }

        input {
            width: 100%;
            background-color: var(--surface);
            border: 1px solid var(--border);
            color: var(--uber-white);
            padding: 16px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.2s;
        }

        input:focus {
            border-color: var(--uber-white);
        }

        .btn-row {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        button {
            flex: 1;
            padding: 18px;
            font-size: 16px;
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: transform 0.1s;
        }

        .btn-start {
            background-color: var(--uber-white);
            color: var(--bg);
        }
        
        .btn-start:hover { opacity: 0.9; }

        .btn-stop {
            background-color: transparent;
            border: 2px solid #cc0000;
            color: #cc0000;
            display: none;
        }

        .status-box {
            margin-top: 40px;
            border-top: 1px solid var(--border);
            padding-top: 20px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
            color: var(--uber-gray);
        }

        .stat-val {
            color: var(--uber-white);
            font-family: monospace;
            font-weight: 700;
        }

        .pulse {
            animation: pulse-animation 2s infinite;
        }

        @keyframes pulse-animation {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        /* Tips for AFK */
        .afk-warning {
            margin-top: 30px;
            font-size: 12px;
            color: #666;
            line-height: 1.5;
            background: #0a0a0a;
            padding: 15px;
            border: 1px solid #222;
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>UnbelievaAuto</h1>
            <span class="version">v2.0</span>
        </header>

        <div class="panel">
            <div>
                <label>Auth Token</label>
                <input type="password" id="token" placeholder="Paste Discord Token">
            </div>
            <div>
                <label>Channel ID</label>
                <input type="text" id="channelId" placeholder="Paste Channel ID">
            </div>

            <div class="btn-row">
                <button id="startBtn" class="btn-start" onclick="startEngine()">START FARM</button>
                <button id="stopBtn" class="btn-stop" onclick="stopEngine()">TERMINATE</button>
            </div>
        </div>

        <div class="status-box">
            <div class="stat-row">
                <span>SYSTEM STATUS</span>
                <span id="status" class="stat-val">IDLE</span>
            </div>
            <div class="stat-row">
                <span>NEXT BATCH IN</span>
                <span id="timer" class="stat-val">-</span>
            </div>
            <div class="stat-row">
                <span>TOTAL CYCLES</span>
                <span id="cycles" class="stat-val">0</span>
            </div>
             <div class="stat-row">
                <span>LAST ACTION</span>
                <span id="log" class="stat-val" style="font-size: 11px;">-</span>
            </div>
        </div>

        <div class="afk-warning">
            <b>AFK MODE TIP:</b> To ensure 100% efficiency while AFK, allow this specific window to remain visible on your screen (even if small). Do not minimize it to the taskbar, as Windows puts minimized Chrome tabs to sleep.
        </div>
    </div>

    <script>
        let isRunning = false;
        let cycleCount = 0;
        let wakeLock = null;

        // The Engine
        async function sendCommand(token, channelId, text) {
            try {
                await fetch(`https://discord.com/api/v9/channels/${channelId}/messages`, {
                    method: 'POST',
                    headers: {
                        'Authorization': token,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ content: text })
                });
            } catch (err) {
                console.error("Failed to send", err);
            }
        }

        function updateStatus(msg, color = "#fff") {
            const el = document.getElementById('status');
            el.innerText = msg;
            el.style.color = color;
            if(msg === "RUNNING") el.classList.add('pulse');
            else el.classList.remove('pulse');
        }

        function stopEngine() {
            isRunning = false;
            document.getElementById('startBtn').style.display = "block";
            document.getElementById('stopBtn').style.display = "none";
            updateStatus("TERMINATED", "#cc0000");
            document.getElementById('log').innerText = "Session Stopped";
        }

        async function startEngine() {
            const token = document.getElementById('token').value;
            const channelId = document.getElementById('channelId').value;

            if (!token || !channelId) return alert("Missing Credentials");

            // UI Setup
            isRunning = true;
            document.getElementById('startBtn').style.display = "none";
            document.getElementById('stopBtn').style.display = "block";
            updateStatus("RUNNING");
            
            // Attempt to keep screen awake (Supported in Chrome/Edge)
            try {
                if ('wakeLock' in navigator) {
                    wakeLock = await navigator.wakeLock.request('screen');
                }
            } catch (err) { console.log("WakeLock not supported"); }

            while (isRunning) {
                // --- EXECUTION PHASE ---
                document.getElementById('log').innerText = ">>> EXECUTING BATCH";
                
                // 1. Work
                await sendCommand(token, channelId, "!work");
                await new Promise(r => setTimeout(r, 200)); // 200ms ensure server processes 'work' first
                
                // 2. Collect
                await sendCommand(token, channelId, "!collect");
                await new Promise(r => setTimeout(r, 200)); // 200ms ensure 'collect' is distinct
                
                // 3. Deposit
                await sendCommand(token, channelId, "!dep all");

                // Update Stats
                cycleCount++;
                document.getElementById('cycles').innerText = cycleCount;

                // --- SMART WAITING PHASE ---
                // We use Date.now() to prevent browser throttling drift
                const waitDuration = 26000; // 26 seconds
                const targetTime = Date.now() + waitDuration;

                while (Date.now() < targetTime && isRunning) {
                    const timeLeft = Math.ceil((targetTime - Date.now()) / 1000);
                    document.getElementById('timer').innerText = `${timeLeft}s`;
                    document.getElementById('log').innerText = "COOLDOWN...";
                    
                    // Check every 1 second
                    await new Promise(r => setTimeout(r, 1000));
                }
            }
        }
    </script>
</body>
</html>
